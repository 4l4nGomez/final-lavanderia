---
import '../styles/global.css';
import Navbar from '../components/Navbar.astro';
---
<head>
  <meta charset="UTF-8" />
  <title>Contacto | Lavo Plus</title>
  <meta name="description" content="Contáctanos para cualquier duda o cotización de servicio de lavandería en Puebla." />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
</head>

<Navbar />

<main class="max-w-4xl mx-auto px-6 py-16 bg-gray-50 text-gray-800">
  <h1 class="text-4xl md:text-5xl font-extrabold text-center text-blue-900 mb-6" data-aos="fade-up">
    Contáctanos
  </h1>
  <p class="text-center text-lg text-gray-600 mb-10" data-aos="fade-up" data-aos-delay="100">
    ¿Tienes preguntas o deseas una cotización? Llena el formulario y te responderemos pronto.
  </p>

  <!-- FORMULARIO -->
  <form
    id="contact-form"
    class="grid grid-cols-1 gap-6 bg-white p-8 rounded-xl shadow-lg"
    data-aos="fade-up"
    data-aos-delay="200"
  >
  <input type="hidden" name="_captcha" value="false" />
<input type="hidden" name="_subject" value="Nuevo mensaje desde el formulario de contacto de Dalailava" />
<input type="hidden" name="_template" value="table" />

    <input type="hidden" name="_captcha" value="false" />

    <div>
      <label for="name" class="block text-gray-700 font-semibold mb-1">Nombre</label>
      <input
        type="text"
        id="name"
        name="name"
        required
        class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="Tu nombre"
      />
    </div>

    <div>
      <label for="email" class="block text-gray-700 font-semibold mb-1">Correo electrónico</label>
      <input
        type="email"
        id="email"
        name="email"
        required
        class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="tucorreo@ejemplo.com"
      />
    </div>

    <div>
      <label for="message" class="block text-gray-700 font-semibold mb-1">Mensaje</label>
      <textarea
        id="message"
        name="message"
        rows="5"
        required
        class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        placeholder="¿En qué podemos ayudarte?"
      ></textarea>
    </div>

    <button
      type="submit"
      class="bg-blue-700 text-white font-semibold py-3 px-6 rounded-md hover:bg-blue-800 transition shadow-md"
    >
      Enviar mensaje
    </button>

    <!-- Mensaje de éxito -->
    <p id="success-message" class="text-green-600 font-semibold hidden">¡Tu mensaje ha sido enviado con éxito!</p>
  </form>
</main>

<!-- AOS Animations y JS de envío -->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js" defer></script>
<script is:inline>
  window.addEventListener('DOMContentLoaded', () => {
    if (window.AOS) {
      window.AOS.init();
    }

    const form = document.getElementById('contact-form');
    const successMsg = document.getElementById('success-message');

    if (form) {
      form.addEventListener('submit', async function (e) {
        e.preventDefault();
        const formData = new FormData(form);
        try {
          const response = await fetch('https://formsubmit.co/lavopluspuebla@gmail.com', {
            method: 'POST',
            body: formData,
          });

          if (response.ok) {
            successMsg.classList.remove('hidden');
            form.reset();
          } else {
            alert('Hubo un error al enviar el formulario.');
          }
        } catch (error) {
          alert('Error de red. Intenta más tarde.');
        }
      });
    }
  });
</script>
